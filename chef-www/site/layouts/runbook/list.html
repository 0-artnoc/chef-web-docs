<!doctype html>
<html lang="en">
{{ partial "docs/head" . }}
<body>
  <div class="off-canvas-wrapper has-sidebar">
    <div class="off-canvas-content" data-off-canvas-content>
      <div class="cell small-12">
        {{ partial "chef-sh/utility-bar" . }}
      </div>
      <div id="menu" class="cell small-12" data-sticky-container>
        {{ partial "docs/header" . }}
      </div>
      <div id="main-content" class="cell small-12" data-sticky-container>
        <div class="grid-container">
          <div class="grid-x">
            <div class="cell medium-3 col-sidebar">
              {{ partial "docs/sidebar" . }}
            </div>
            
            <div class="toc">
              <div id="mini-toc">
                <span><strong><h4>Table Of Contents</h4></strong></span>
                <div class="js-toc"></div>
              </div>
            </div>
            
            <div id="main-content-col" class="cell medium-9 col-content">
              <div class="js-toc-content">
              <h1 id="resources-reference">Runbook</h1>
                
                {{ partial "chef_server.html" . }}

                {{ partial "chef_server_component_erchef_background.html" . }}
                
                <p>
                  The following diagram shows the various components that are part of a
                  Chef Infra Server deployment and how they relate to one another.
                </p>


                <img src="/images/server_components.svg" width="500" alt="image" />

                <table>
                <colgroup>
                <col style="width: 12%" />
                <col style="width: 87%" />
                </colgroup>
                <thead>
                <tr class="header">
                <th>Component</th>
                <th>Description</th>
                </tr>
                </thead>
                <tbody>
                <tr class="odd">
                <td><p>Bookshelf</p></td>
                <td><p>{{ partial "chef_server_component_bookshelf.html" . }}</p>
                <p>All cookbooks are stored in a dedicated repository.</p></td>
                </tr>
                <tr class="even">
                <td>Erchef</td>
                <td>{{ partial "chef_server_component_erchef.html" . }}</td>
                </tr>
                <tr class="odd">
                <td><p>Message Queues</p></td>
                <td><p>Messages are sent to the Search Index using the following components:</p>
                <blockquote>
                <ol>
                <li>{{ partial "chef_server_component_rabbitmq.html" . }}</li>
                <li>{{ partial "chef_server_component_expander.html" . }}</li>
                <li>{{ partial "chef_server_component_solr.html" . }}</li>
                </ol>
                </blockquote>
                <p>All messages are added to a dedicated search index repository.</p></td>
                </tr>
                <tr class="even">
                <td>Nginx</td>
                <td>{{ partial "chef_server_component_nginx.html" . }}</td>
                </tr>
                <tr class="odd">
                <td>PostgreSQL</td>
                <td>{{ partial "chef_server_component_postgresql.html" . }}</td>
                </tr>
                </tbody>
                </table>

                <p>
                  The following sections detail how to monitor the server, manage log
                  files, manage services, manage firewalls and ports, configure SSL, tune
                  server configuration settings, and backup and restore data.
                </p>

                {{ range .Pages.ByParam "runbook_weight" }}
                <h1 id='{{anchorize .Title}}'>{{ .Title }}</h1>
                <hr>
                  {{ .Content }}
                {{ end }}
              </div>  
            </div>
          </div>
        </div>
      </div>
      <div id="footer" class="cell small-12">
        <div class="grid-x">
          <div class="cell small-12">
            <nav>
              {{ partial "chef-sh/footer" . }}
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="{{ "js/scripts-all.js" | relURL }}"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  <script type="text/javascript">
    docsearch({
      apiKey: '3f16191e15b2b4a4b0823c9f856e2de2',
      indexName: 'chef_sh',
      inputSelector: '#doc-search',
      debug: false // Set debug to true if you want to inspect the dropdown
    });
  </script>
    
  <script src="/tocbot.js"></script>
  <!-- tocbot options: https://tscanlin.github.io/tocbot/#options -->
  <script type="text/javascript">
  tocbot.init({
  // Where to render the table of contents.
  tocSelector: '.js-toc',
  // Where to grab the headings to build the table of contents.
  contentSelector: '.js-toc-content',
  // Which headings to grab inside of the contentSelector element.
  headingSelector: 'h1, h2, h3, h4',
  orderedList: false,
  fixedSidebarOffset: 'auto',
  collapseDepth: 3,
  });
  </script>
</body>
</html>
